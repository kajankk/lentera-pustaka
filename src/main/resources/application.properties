spring.application.name=demo
app.version=@project.version@
spring.profiles.active=prod
server.error.include-message=always
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css

########################### Database Properties (Railway PostgreSQL) ###########
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://maglev.proxy.rlwy.net:25594/railway}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:BaLWacgRDIEWOFcqIWwuNAvpCSSUxNPM}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings untuk production
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.leak-detection-threshold=60000

############################ MyBatis Properties ################################
# FIXED: Updated MyBatis configuration
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.jdbc-type-for-null=NULL
mybatis.configuration.log-impl=org.apache.ibatis.logging.slf4j.Slf4jImpl
mybatis.mapper-locations=classpath*:/mapper/*.xml
mybatis.type-aliases-package=com.naskah.demo.model.entity
mybatis.configuration.default-fetch-size=100
mybatis.configuration.default-statement-timeout=30

# FIXED: Add explicit MyBatis configuration
mybatis.configuration.cache-enabled=true
mybatis.configuration.lazy-loading-enabled=true
mybatis.configuration.multiple-result-sets-enabled=true
mybatis.configuration.use-column-label=true
mybatis.configuration.use-generated-keys=true
mybatis.configuration.auto-mapping-behavior=partial

################################ File Properties ################################
file.upload-directory=${FILE_UPLOAD_DIR:/app/storage}
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:50MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:50MB}

############################ Cloudinary Configuration ############################
cloudinary.cloud_name=${CLOUDINARY_CLOUD_NAME:deqrhgho3}
cloudinary.api_key=${CLOUDINARY_API_KEY:395435938835511}
cloudinary.api_secret=${CLOUDINARY_API_SECRET:C_xXMwOtjdIj8jvnr7a03KJe5Qg}

# JWT Configuration
jwt.secret=${JWT_SECRET:myVeryLongSecretKeyThatIsAtLeast256BitsLongForHS256Algorithm}
jwt.expiration=${JWT_EXPIRATION:86400}

# Email Configuration
app.name=${APP_NAME:skah.org}
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:fajarandik13@gmail.com}
spring.mail.password=${MAIL_PASSWORD:kdsz gfzg pqeh dumh}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# OAuth Configuration
google.oauth.client-id=${GOOGLE_OAUTH_CLIENT_ID:644188249203-6ubpfp4037dkv65uk67c1em6v5064ub0.apps.googleusercontent.com}

# Frontend URL
app.frontend.url=${FRONTEND_URL:https://your-railway-app.railway.app}

# FIXED: Logging Configuration - Reduce log levels for production
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:DEBUG}
logging.level.com.naskah.demo=${LOG_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:DEBUG}
logging.level.org.mybatis=${LOG_LEVEL_MYBATIS:DEBUG}
logging.level.org.apache.ibatis=${LOG_LEVEL_IBATIS:DEBUG}

# Production optimizations
server.http2.enabled=true

# FIXED: Add datasource validation
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=5000
spring.datasource.initialization-mode=always

# FIXED: Add transaction management
spring.transaction.default-timeout=30
spring.transaction.rollback-on-commit-failure=true